# 更新日志

本文档记录了 Lyfe's Prompt Hub 的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [3.11.1] - 2024-12-25

### Fixed
- 优化了预览窗口复制按钮样式，现在与其他按钮风格保持一致（默认透明背景，点击后蓝色背景）
- 确保预览内容正确显示原始换行符，保持提示词内容的原始格式
- 调整了复制按钮的状态反馈时间和样式类名
- 🐛 **修复预览框滚动条显示问题**：确保长内容时正确显示滚动条
- 🐛 **修复预览框底部分类和标签显示问题**：优化高度计算和布局，确保meta信息区域完整显示
- 🐛 **修复CSS选择器错误**：统一预览内容的class名称引用，从`.preview-content`改为`.prompt-preview-content`

### Improved
- **预览窗口用户体验优化**：
  - 修复底部分类和标签信息被截断的问题，调整内容区域高度确保完整显示
  - 增强滚动条可见性，滚动条宽度增加到14px，增加最小高度便于抓取
  - 优化预览窗口定位，增加与左侧内容的间距（16px），提升视觉舒适度
  - 调整预览窗口整体尺寸，宽度优化为450px，最大高度限制为75vh
  - 改进分类和标签的视觉样式，增加内边距和圆角，提升可读性
- 增强了预览内容的可读性，优化了行距和文本对齐
- 改进了复制按钮的用户体验，状态变化更加平滑
- 添加了调试日志用于验证换行符处理

### Changed
- **预览功能交互模式变更**：将预览从悬停触发改为点击触发，提供更精确的用户控制
- **按钮状态同步**：预览按钮点击后显示"取消预览"状态，与收藏按钮的取消状态保持一致的UI风格
- **样式统一**：预览按钮的取消状态使用与收藏按钮相同的样式类，确保界面一致性
- 🔄 **预览切换优化**：切换到其他提示词预览时自动隐藏当前预览，避免多个预览同时显示
- 📱 **自适应宽度**：预览窗口宽度根据扩展面板实际宽度动态调整，适配不同的侧边栏宽度设置

## [3.11.0] - 2024-12-25 🎨 预览功能用户体验优化

### 🎨 用户体验提升
- **复制按钮交互优化**：预览窗口中的复制按钮点击后直接显示"已复制"状态，移除了中间的"复制中..."过渡状态
- **按钮样式改进**：优化复制按钮的hover和success状态样式，提供更清晰的视觉反馈
- **响应速度提升**：点击复制按钮后立即响应，无延迟地显示成功状态

### 🔧 技术优化
- **代码简化**：移除不必要的copying状态和相关CSS样式，简化交互逻辑
- **性能提升**：减少DOM操作和状态切换的复杂度
- **代码维护性**：清理冗余代码，提高代码的可读性和维护性

### 🛡️ 稳定性保证
- **交互保护**：保持复制期间按钮禁用状态，防止重复点击
- **状态恢复**：确保2秒后正确恢复按钮的初始状态

## [3.10.1] - 2024-12-25 👁️ 提示词预览功能

### ✨ 新功能
- **悬停预览**：鼠标悬停到提示词卡片时显示内容预览卡片
- **智能定位**：预览卡片自动避免超出屏幕边界，支持上下左右智能定位
- **延迟显示**：悬停500ms后显示预览，避免意外触发
- **平滑动画**：预览卡片支持透明度和位移的平滑过渡动画

### 🎨 用户体验提升
- **快速浏览**：无需点击即可快速浏览提示词内容
- **内容截断**：长内容自动截断并显示省略号，避免预览框过大
- **元信息显示**：显示提示词的分类、标签等元信息
- **VSCode主题适配**：预览卡片完美适配VSCode各种主题色彩

### 🔧 技术实现
- **模块化设计**：独立的预览功能模块(`promptPreview.js`)
- **事件管理**：智能的鼠标事件处理，避免与操作按钮冲突
- **定位算法**：动态计算最佳显示位置，支持箭头指示器
- **性能优化**：合理的显示/隐藏延迟，减少不必要的DOM操作

### 🛡️ 交互保护
- **按钮区域排除**：鼠标在操作按钮区域时不显示预览
- **点击隐藏**：点击任意位置或滚动页面时自动隐藏预览
- **状态管理**：完善的预览状态管理，避免重复显示或隐藏异常

## [3.10.0] - 2024-12-25 🏗️ 同步模块架构重构

### 🏗️ 架构重构
- **模块化设计**：将原有的 `syncManager.ts` 文件重构为多个独立模块
- **职责分离**：按功能职责分离为不同的文件和类
- **接口标准化**：所有云服务提供商实现统一的 `ICloudProvider` 接口
- **代码复用**：提取公共的错误处理和工具类

### 📁 新增文件结构
- **`src/sync/syncTypes.ts`** - 类型定义和常量管理
- **`src/sync/syncErrorUtils.ts`** - 统一的错误处理工具
- **`src/sync/secretManager.ts`** - 独立的密钥管理器
- **`src/sync/providers/`** - 各云服务提供商的独立实现
  - `githubProvider.ts` - GitHub Gist 同步
  - `giteeProvider.ts` - Gitee Gist 同步
  - `gitlabProvider.ts` - GitLab Snippet 同步
  - `webdavProvider.ts` - WebDAV 同步
  - `customApiProvider.ts` - 自定义 API 同步
- **`src/sync/index.ts`** - 统一导出文件
- **`src/sync/README.md`** - 模块文档说明

### 🔧 技术改进
- **SyncManager 重构**：从具体实现者转变为协调器角色
- **Provider 模式**：每个云服务提供商独立实现，易于维护和扩展
- **接口抽象**：定义标准接口，确保各提供商实现的一致性
- **错误处理统一**：集中的错误处理逻辑，提供一致的错误信息

### 🚀 性能与维护性提升
- **代码分离**：单一职责原则，每个文件职责明确
- **易于扩展**：添加新的云服务提供商变得更加简单
- **易于测试**：模块化设计便于单元测试
- **文档完善**：为新的模块结构提供详细文档

### 🛡️ 向后兼容
- **API 保持不变**：对外 API 完全保持兼容，不影响现有使用
- **功能完整保留**：所有原有功能完全保留，无任何缺失
- **配置兼容**：现有的同步配置完全兼容新架构

### 📚 开发者体验
- **清晰结构**：新的文件结构更加清晰和直观
- **代码复用**：减少重复代码，提高开发效率
- **类型安全**：更好的TypeScript类型支持
- **文档齐全**：完善的模块文档和使用说明

## [3.9.51] - 2024-12-23 ✨ 收藏分类悬停交互优化

### ✨ 新功能
- **收藏分类悬停优化**：在收藏分类中，鼠标悬停在已收藏的提示词上时，按钮文本从"已收藏"动态改为"取消收藏"，让用户更清楚点击后的行为

### 🎨 用户体验提升
- **交互反馈增强**：悬停时动态显示操作意图，提升用户操作的预期性
- **分类智能感知**：只在收藏分类中生效，其他分类保持原有行为
- **平滑过渡**：鼠标离开时自动恢复原始状态

### 🔧 技术实现
- **事件委托机制**：使用事件委托处理悬停事件，性能更优
- **状态感知**：智能检测当前分类和提示词收藏状态
- **文本动态更新**：实时更新按钮文本和title属性

## [3.9.50] - 2024-12-23 🐛 UI样式统一与复制功能修复

### 🐛 问题修复
- **复制功能修复**：修复复制功能API调用错误，确保能正确复制提示词内容到剪贴板
- **UI样式统一**：已收藏按钮的样式现在与已复制按钮保持一致，使用相同的视觉反馈
- **状态管理优化**：完善收藏按钮的状态切换，确保样式类正确应用和移除

### 🎨 用户体验提升
- **视觉一致性**：收藏状态和复制状态使用相同的高亮样式
- **系统通知**：确保复制成功后显示VS Code系统通知
- **状态反馈**：优化按钮状态的视觉反馈机制

### 🔧 技术改进
- **API调用修复**：修正 `postMessage` 函数的参数传递错误
- **样式类管理**：为已收藏状态添加 `favorited` 样式类
- **代码一致性**：统一按钮状态管理逻辑

## [3.9.49] - 2024-12-23 🎯 复制功能增强

### 🚀 新功能
- **键盘快捷键**：添加 Ctrl+C/Cmd+C 快捷键支持，选中提示词后可快速复制
- **提示词选中状态**：点击提示词时显示选中状态，支持键盘操作和视觉反馈
- **防重复点击机制**：强化复制按钮的防重复点击保护，避免快速多次点击造成问题

### 🎨 用户体验提升
- **视觉反馈增强**：复制按钮增加 "copying" 状态样式，提供更好的视觉反馈
- **状态指示优化**：复制成功后按钮文本显示"已复制"，图标变为对勾
- **选中状态样式**：选中的提示词项显示蓝色左边框和高亮背景

### 🔧 技术改进
- **API层优化**：在API层添加防重复调用机制，使用Set跟踪正在进行的复制请求
- **错误处理增强**：完善复制功能的错误处理和日志记录
- **代码可维护性**：重构复制逻辑，提高代码的可读性和维护性

### 🛡️ 稳定性保证
- **多层防护**：从UI层到API层的多重防重复机制
- **状态管理**：改进按钮状态管理，确保状态正确恢复
- **兜底方案**：添加兜底逻辑，即使在异常情况下也能正确恢复按钮状态

## [3.9.48] - 2024-12-23 📦 版本发布

### 🔧 技术改进
- **构建优化**：更新构建配置，提升编译性能
- **代码完善**：修复潜在的代码问题和优化
- **依赖更新**：更新相关依赖包到最新稳定版本

### 🛠️ 维护更新
- **版本管理**：标准化版本发布流程
- **文档更新**：完善项目文档和使用说明
- **稳定性提升**：进一步提升扩展的稳定性和可靠性

## [1.0.0] - 2024-12-19 🎉 正式版发布

### 🎊 里程碑
- **正式发布**：经过长期开发和测试，Lyfe's Prompt Hub 正式发布 1.0.0 版本
- **生产就绪**：功能完善、架构稳定，可用于生产环境
- **社区支持**：完整的文档、贡献指南，欢迎社区参与

### ✨ 核心功能
- **提示词管理**：完整的CRUD操作，支持分类、标签、搜索
- **收藏系统**：使用收藏按钮标记重要提示词，快速访问常用内容
- **一键复制**：优化的复制体验，支持多次点击和即时反馈
- **云端同步**：支持 GitHub Gist、GitLab、Gitee、WebDAV 多种同步方式
- **数据备份**：完善的备份管理，支持自动备份和一键恢复

### 🎨 用户体验
- **悬浮操作**：操作按钮改为鼠标悬停时显示，界面更简洁
- **即时反馈**：复制按钮点击后图标变为对勾，文字变为"已复制"
- **视觉过渡**：添加平滑的透明度过渡动画（0.2s ease-in-out）
- **系统通知**：复制提示词后显示VS Code系统通知确认

### 🔧 技术特性
- **工作区模式**：支持项目级别的提示词管理
- **多格式支持**：JSON导入导出，灵活的数据交换
- **主题适配**：完美适配VS Code各种主题
- **性能优化**：高效的数据处理和UI渲染

### 🛡️ 稳定性保证
- **错误处理**：完善的错误处理和用户反馈机制
- **数据安全**：多重备份保护，防止数据丢失
- **兼容性**：支持VS Code 1.74.0及以上版本
- **测试覆盖**：经过充分测试，确保功能稳定性

## [0.9.x] - 2024年早期版本

### ☁️ 云同步功能完善
- **多平台支持**：支持 GitHub Gist、GitLab Snippets、Gitee Gist、WebDAV
- **自动同步**：可配置自动同步选项
- **冲突处理**：智能处理同步冲突，提供合并选项
- **验证机制**：添加云端连接验证和错误处理

### 💾 备份管理增强
- **备份列表**：显示所有历史备份文件
- **备份重命名**：支持备份文件重命名功能
- **一键恢复**：快速从备份恢复数据
- **自动备份**：定期自动创建数据备份

### 🔍 搜索体验优化
- **模糊搜索**：支持标题和内容的模糊匹配
- **标签搜索**：可按标签快速筛选提示词
- **实时过滤**：输入时实时显示搜索结果
- **搜索高亮**：搜索结果中高亮显示匹配文本

### 🎯 分类管理完善
- **自定义分类**：支持添加、编辑、删除分类
- **分类统计**：显示每个分类下的提示词数量
- **批量移动**：支持批量移动提示词到不同分类
- **分类排序**：可自定义分类显示顺序

## [0.8.x] - 2024年中期版本

### 🏗️ 架构重构
- **数据管理**：重构数据管理层，提高性能和稳定性
- **存储优化**：优化本地存储机制，支持大量数据
- **错误处理**：完善错误处理和用户反馈机制
- **代码分离**：前后端代码进一步解耦，提高维护性

### 🔧 工作区模式
- **项目级配置**：支持为每个项目设置独立的提示词库
- **配置隔离**：工作区和全局配置完全隔离
- **快速切换**：可在全局和工作区模式间快速切换
- **数据迁移**：支持全局数据向工作区迁移

### 📱 界面响应式
- **面板适配**：适配不同尺寸的VS Code面板
- **布局优化**：优化小屏幕下的界面布局
- **操作简化**：简化复杂操作的交互流程
- **主题兼容**：完美兼容各种VS Code主题

## [0.7.x] - 2024年早期版本

### 🎨 UI/UX 重设计
- **现代界面**：采用现代化的界面设计语言
- **图标系统**：使用VS Code Codicon图标系统
- **颜色主题**：完全适配VS Code颜色主题
- **交互优化**：优化按钮、表单等交互元素

### 📊 数据统计
- **使用统计**：记录提示词使用频率
- **数据概览**：显示提示词库的整体统计信息
- **导出报告**：支持导出使用统计报告
- **性能监控**：监控扩展性能和资源使用

### 🔐 安全增强
- **数据加密**：敏感配置信息加密存储
- **权限控制**：细化文件系统访问权限
- **安全审计**：添加操作日志和安全审计
- **隐私保护**：强化用户隐私数据保护

## [0.6.x] - 2023年版本

### 🚀 核心功能建立
- **基础CRUD**：实现提示词的创建、读取、更新、删除
- **分类系统**：建立基础的分类管理系统
- **标签功能**：实现多标签管理和筛选
- **搜索功能**：基础的文本搜索功能

### 💾 数据持久化
- **本地存储**：实现本地数据持久化存储
- **数据导入导出**：支持JSON格式的数据导入导出
- **备份功能**：基础的数据备份功能
- **数据验证**：添加数据完整性验证

### 🎛️ 基础设置
- **配置管理**：基础的扩展配置管理
- **用户偏好**：支持用户个性化设置
- **主题适配**：基础的VS Code主题适配
- **快捷键**：定义基础的快捷键操作

## 计划中的功能

### 🔮 未来版本计划

#### v4.0.0 - 重大更新
- **AI集成**：直接集成AI服务，无需复制粘贴
- **智能推荐**：基于使用习惯的智能提示词推荐
- **协作功能**：团队共享提示词库
- **插件系统**：支持第三方插件扩展

#### v1.10.x - 功能增强
- **模板系统**：支持提示词模板和变量替换
- **快捷插入**：直接插入提示词到编辑器
- **历史记录**：记录提示词使用历史
- **统计分析**：详细的使用统计和分析

#### v1.9.x - 体验优化
- **性能优化**：大幅提升大数据量下的性能
- **国际化**：支持多语言界面
- **快捷操作**：更多的快捷键和右键菜单
- **批量操作**：增强批量操作功能

---

## 贡献指南

我们欢迎各种形式的贡献！请查看 [贡献指南](CONTRIBUTING.md) 了解如何：

- 报告问题
- 提出功能建议  
- 提交代码贡献
- 改进文档

## 版本发布说明

- **主版本号**：重大架构变更或不兼容的API变更
- **次版本号**：新功能添加，向后兼容
- **修订版本号**：问题修复和小的改进

每个版本都会在 [GitHub Releases](https://github.com/lyfe2025/lyfes-prompt-hub/releases) 中发布，包含详细的变更说明和下载链接。 